(()=>{"use strict";var t={845:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pipe=e.registerPipe=void 0;let i=new Map;e.registerPipe=function(t,e){i.set(t,e)},e.pipe=function(t,e){return i.get(t).call(void 0,e)}},414:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ViewModel=void 0;const n=i(845);e.ViewModel=class{constructor(t,e){this.foreachClassName="ft-foreach",this.model=e,this.name=t,this.attrBindAttr=`${this.name}-attr-bind`,this.contentBindAttr=`${this.name}-content-bind`,this.eventBindAttr=`${this.name}-event-bind`,this.jsBindAttr=`${this.name}-js-bind`,this.foreachBindAttr=`${this.name}-foreach`,this.views=document.querySelectorAll(`[ft-view-model=${t}]`),this.setupValueBindings(),this.setupEventBinding()}onInit(){this.updateViews()}onEvent(t,e){throw new Error("Method not implemented.")}setupEventBinding(){this.views.forEach((t=>{t.querySelectorAll(`[${this.eventBindAttr}]`).forEach((t=>{this.bindEvents(t)}))}))}setupValueBindings(){this.views.forEach((t=>{t.querySelectorAll(`[${this.jsBindAttr}]`).forEach((t=>{this.bindChangeEvent(t)}))}))}updateViews(){this.views.forEach((t=>{this.updateView(t)}))}updateView(t){t.querySelectorAll(`[${this.attrBindAttr}]`).forEach((t=>{this.bindAttributes(t)})),t.querySelectorAll(`[${this.contentBindAttr}]`).forEach((t=>{this.bindContent(t)})),t.querySelectorAll(`[${this.jsBindAttr}]`).forEach((t=>{this.bindValue(t)})),t.querySelectorAll(`[${this.foreachBindAttr}]`).forEach((t=>{this.iterateOver(t)}))}bindAttributes(t,e,i){let r=t.getAttribute(this.attrBindAttr);null!=r&&r.split(",").forEach((r=>{let s=r.split(/(?<!\\):/),l=s[0].trim(),o=s[1].trim(),a="";try{if(a=Function(this.getValueBindingFunction(o,e,i))(),null==a&&(a=""),s.length>2){let t=s[2].trim();a=n.pipe(t,a)}}catch(t){}0==a?t.removeAttribute(l):t.setAttribute(l,a)}))}bindContent(t,e,i){let r=t.getAttribute(this.contentBindAttr);if(null==r)return;let s=r.split(/(?<!\\):/);r=s[0];let l="";try{if(l=Function(this.getValueBindingFunction(r,e,i))(),null==l&&(l=""),s.length>1){let t=s[1].trim();l=n.pipe(t,l)}}catch(t){}t.innerHTML=l}bindValue(t,e,i){let n=t.getAttribute(this.jsBindAttr);null!=n&&n.split(",").forEach((n=>{let r=n.split(":")[0].trim(),s=n.split(":")[1].trim(),l="";try{l=Function(this.getValueBindingFunction("$vm."+s,e,i))(),null==l&&(l="")}catch(t){}t[r]=l}))}bindEvents(t){t.getAttribute(this.eventBindAttr).split(",").forEach((e=>{let i=e.split(":")[0].trim(),n=e.split(":")[1].trim();t.addEventListener(i,(t=>{this.onEvent(t,n)}))}))}bindChangeEvent(t){t.getAttribute(this.jsBindAttr).split(",").forEach((e=>{t.addEventListener("change",(t=>{let i=e.split(":")[0].trim(),n=this,r=e.split(":")[1].trim().split(".");for(var s=0;s<r.length-1;s++)n=n[r[s]];n[r[r.length-1]]=t.target[i],this.updateViews()}))}))}getValueBindingFunction(t,e,i){let n='"use strict";';return n=n.concat(`let $vm = ${JSON.stringify(this)};`),n=n.concat(`let $item = ${JSON.stringify(e)};`),n=n.concat(`let $i = ${i};`),n=n.concat(`return ( ${t} )`),n}iterateOver(t){if(null==t.parentNode)return;let e=t.getAttribute(this.foreachBindAttr),i=Function(this.getValueBindingFunction(e))();console.log(i);let n=`${this.foreachClassName}-${e}`;this.clearChildrenWithClassName(t.parentElement,n);let r=0;i.forEach((e=>{let i=t.cloneNode(!0);this.bindAttributes(i,e,r),this.bindContent(i,e,r),this.bindValue(i,e,r),i.querySelectorAll(`[${this.attrBindAttr}]`).forEach((t=>{this.bindAttributes(t,e,r)})),i.querySelectorAll(`[${this.contentBindAttr}]`).forEach((t=>{this.bindContent(t,e,r)})),i.querySelectorAll(`[${this.jsBindAttr}]`).forEach((t=>{this.bindValue(t,e,r)})),i.classList.add(n),i.removeAttribute("hidden"),t.parentNode.appendChild(i),r++})),t.setAttribute("hidden","true")}clearChildrenWithClassName(t,e){if(null==t)return;let i=t.parentElement.getElementsByClassName(e);for(;i[0];)i[0].parentNode.removeChild(i[0])}}},235:(t,e,i)=>{e.K6=e.jz=void 0;var n=i(414);Object.defineProperty(e,"jz",{enumerable:!0,get:function(){return n.ViewModel}});var r=i(845);Object.defineProperty(e,"K6",{enumerable:!0,get:function(){return r.registerPipe}})}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}(()=>{var t=i(235);class e extends t.jz{constructor(){super(...arguments),this.name=""}}document.addEventListener("DOMContentLoaded",(i=>{(0,t.K6)("greet",(t=>""===t?"Enter your name!":`Hello ${t}!`)),new e("greeter-vm").onInit()}))})()})();